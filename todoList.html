<!DOCTYPE html>

<html>
  <head>
    <title>Practical JavaScript</title>
  </head>

  <body>
    <button id="display-todos-button">Display Todos</button>
    <button id="toggle-all-button">Toggle All</button>
    <script>
      var todos = [
      {todoText: "Get Groceries", completed: true},
      {todoText: "Take a jog", completed: false},
      {todoText: "Take a nap", completed: false},
      ];

      displayTodos();

      //adds new item to todo list
      function add(newItem){
        todos.push({todoText: newItem, completed: false});
        displayTodos();
      }
      
      //edit todo item
      function edit(position, edition){
        
        todos[position].todoText = edition;
        displayTodos();

      }
      
      //remove a todo item
      function remove(position){
        todos.splice(position, 1);
        displayTodos();
      }

      //toggle a todo item
      function toggle(position){

        if(todos[position].completed==false){
          todos[position].completed=true;
        }else{
          todos[position].completed=false;
        }
        displayTodos();
      }

      
      function displayTodos(){
        //console.log(todos);

        for (var i = 0; i<todos.length; i++){
          console.log(todos[i]);
        }
      }

      function toggleAll(){
        var compRate = 0;
        for (var i = 0; i<todos.length; i++){
          if(todos[i].completed===true){
            compRate++;
          }
        }

        if(compRate<todos.length){
          for(var i = 0; i<todos.length; i++){
            todos[i].completed = true;
          }
        }else{
          for(var i = 0; i<todos.length; i++){
            todos[i].completed = false;
          }
        }
        displayTodos();
      } 
      
      function weirdToggleAll() {
        var completedTodos = 0;
        var allCompleted = true;

        for (var i = 0; i < todos.length; i++) {
          if (todos[i].completed !== false) {
            completedTodos++;
          }

          if (completedTodos !== i + 1) {
            allCompleted = false;
          }
        }

        if (allCompleted === true) {
          for (var i = 0; i < todos.length; i++) {
            todos[i].completed = false;
          }
        } else {
          for (var i = 0; i < todos.length; i++) {
            todos[i].completed = true;  
          }
        }

        displayTodos();
      }

      var displayTodosButton = document.getElementById("display-todos-button");
      displayTodosButton.addEventListener("click", displayTodos);

      var toggleAllButton = document.getElementById("toggle-all-button");
      toggleAllButton.addEventListener("click", toggleAll);

    </script>

  </body>
</html>